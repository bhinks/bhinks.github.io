<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <title>
    OMG!stats - OMG!ninjabot
  </title>
  <link rel="stylesheet" href="/assets/css/main.css">
  <script type="text/javascript" src=""></script>
  <link rel="stylesheet" href="https://uicdn.toast.com/tui.chart/latest/tui-chart.min.css">
  <script src="https://uicdn.toast.com/tui.chart/latest/tui-chart-all.js"></script>

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>OMG!stats | OMG!ninjabot</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="OMG!stats" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A random output stream of questionable value." />
<meta property="og:description" content="A random output stream of questionable value." />
<link rel="canonical" href="https://ninjabot.me/stats/" />
<meta property="og:url" content="https://ninjabot.me/stats/" />
<meta property="og:site_name" content="OMG!ninjabot" />
<script type="application/ld+json">
{"url":"https://ninjabot.me/stats/","@type":"WebPage","headline":"OMG!stats","description":"A random output stream of questionable value.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


</head>


  <body class="">

    <header>
  <div class="menu">
    <ul>
      <li class="page_title">OMG!stats</li>
<li><a href="/">/home</a></li>
<li><a href="/about/">/about</a></li>
<li><a href="/stats/">/stats</a></li>
</ul>
  </div>
</header>


    <script>
    function loadJSON(callback) {   
        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('GET', '/assets/stats.json', true);
        xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
                // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
                callback(xobj.responseText);
            }
        };
        xobj.send(null);  
    }

    function init() {
        loadJSON(function(response) {
        // Parse JSON string into object
            var players = JSON.parse(response);
            //console.log(players);

            for (let [name, player] of Object.entries(players)) {

                $(".player_tables").append(
                    "<h2>" + name + "'s Stats</h2>" +
                    "<table border='1'>" +
                    "<tr><th>Total Kills</th><td>" + player["total_kills"] + "</td></tr>" +
                    "<tr><th>Total Deaths</th><td>" + player["total_deaths"] + "</td></tr>" +
                    "<tr><th>Total Suicides</th><td>" + player["total_suicides"] + "</td></tr>" +
                    "<tr><th>Minutes Played</th><td>" + player["total_minutes"] + "</td></tr>" +
                    "<tr><th>Kills Per Hour</th><td>" + player["total_kills"] / (player["total_minutes"] / 60 ) + "</td></tr>" +
                    "<tr><th>Deaths Per Hour</th><td>" + player["total_deaths"] / (player["total_minutes"] / 60 ) + "</td></tr>" +
                    "<tr><th>Overall KDR</th><td>" + player["total_kills"] / player["total_deaths"] + "</td></tr>" +
                    "</table>" +
                    "<div id='" + name.replace('[','').replace(']','') + "-ochart'></div>" +
                    "<div id='" + name.replace('[','').replace(']','') + "-wchart'></div>"
                );
                var opp_container = document.getElementById(name.replace('[','').replace(']','') + "-ochart");
                var weap_container = document.getElementById(name.replace('[','').replace(']','') + "-wchart");

                var opp_data = {
                    categories: [],
                    series: [
                        {
                            name: "Killed",
                            data: []
                        },
                        {
                            name: "Killed By",
                            data: []
                        }

                    ]
                };
                var weap_data = {
                    categories: [],
                    series: [
                        {
                            name: "Killed With",
                            data: []
                        },
                        {
                            name: "Killed By",
                            data: []
                        }

                    ]
                };
                var biggest = 10;
                for (let [opp_name, opp] of Object.entries(player["opponents"])) {
                    opp_data["categories"].push(opp_name);
                    opp_data["series"][0]["data"].push(opp["kills"]);
                    opp_data["series"][1]["data"].push(opp["deaths"]);
                    if (opp["kills"] > biggest) { 
                        biggest = opp["kills"];
                    }
                    if (opp["deaths"] > biggest) { 
                        biggest = opp["deaths"];
                    }
                }
                for (let [weap_name, weap] of Object.entries(player["weapons"])) {
                    weap_data["categories"].push(weap_name);
                    weap_data["series"][0]["data"].push(weap["kills"]);
                    weap_data["series"][1]["data"].push(weap["deaths"]);
                    if (weap["kills"] > biggest) { 
                        biggest = weap["kills"];
                    }
                    if (weap["deaths"] > biggest) { 
                        biggest = weap["deaths"];
                    }
                }

                var opp_options = {
                    chart: {
                        width: 1160,
                        height: 650,
                        title: name,
                        format: '1,000'
                    },
                    yAxis: {
                        title: 'Opponents'
                    },
                    xAxis: {
                        title: 'Frags',
                        min: 0,
                        max: biggest + 5
                    },
                    series: {
                        showLabel: true
                    }
                };
                var weap_options = {
                    chart: {
                        width: 1160,
                        height: 650,
                        title: name,
                        format: '1,000'
                    },
                    yAxis: {
                        title: 'Weapons'
                    },
                    xAxis: {
                        title: 'Frags',
                        min: 0,
                        max: biggest + 5
                    },
                    series: {
                        showLabel: true
                    }
                };
                var theme = {
                    chart: {
                        fontFamily: 'Roboto Mono',
                        background: {
                            color: '#282A36',
                            opacity: 1
                        }
                    },
                    title: {
                        fontSize: 20,
                        fontFamily: 'Verdana',
                        fontWeight: 'bold',
                        color: '#DDD'
                    },
                    xAxis: {
                        title: {
                            fontSize: 14,
                            fontFamily: 'Verdana',
                            fontWeight: 'bold',
                            color: '#DDD'
                        },
                        label: {
                            fontSize: 14,
                            fontFamily: 'Verdana',
                            fontWeight: 'bold',
                            color: '#DDD'
                        }
                    },
                    yAxis: {
                        title: {
                            fontSize: 14,
                            fontFamily: 'Verdana',
                            fontWeight: 'bold',
                            color: '#DDD'
                        },
                        label: {
                            fontSize: 14,
                            fontFamily: 'Verdana',
                            fontWeight: 'bold',
                            color: '#DDD'
                        }
                    },
                    plot: {
                        lineColor: '#DDD'
                    },
                    series: {
                        colors: ['#2ed573', '#fb660a'],
                        label: {
                            fontSize: 14,
                            fontFamily: 'Verdana',
                            fontWeight: 'bold',
                            color: '#DDD'
                        }
                    },
                    legend: {
                        label: {
                            fontSize: 14,
                            fontFamily: 'Verdana',
                            fontWeight: 'bold',
                            color: '#DDD'
                        }
                    }
                };
                tui.chart.registerTheme('newTheme', theme);
                opp_options.theme = "newTheme";
                weap_options.theme = "newTheme";
                tui.chart.barChart(opp_container, opp_data, opp_options);
                tui.chart.barChart(weap_container, weap_data, weap_options);

            }

        });
    }

    init();
    
</script>

<div class="player_tables">

</div>



    <footer>

  OMG!ninjabot/stats
  <br><br>
   <img class="emoji" title=":octocat:" alt=":octocat:" src="https://github.githubassets.com/images/icons/emoji/octocat.png" height="20" width="20"> <a href="https://github.com/bhinks">@bhinks</a> 
   <img class="emoji" title=":bird:" alt=":bird:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f426.png" height="20" width="20"> <a href="https://twitter.com/ninjabot">@ninjabot</a> 
   <img class="emoji" title=":briefcase:" alt=":briefcase:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4bc.png" height="20" width="20"> <a href="https://www.linkedin.com/in/brenthinks/">@brenthinks</a> 
   <img class="emoji" title=":video_game:" alt=":video_game:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3ae.png" height="20" width="20"> <a href="https://steamcommunity.com/id/ninjabot/">@ninjabot</a> 


</footer>


  </body>
</html>
